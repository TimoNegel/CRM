@page "/adresse/create"

<MudText Typo="Typo.h4">Adresse hinzufügen</MudText>
<br />
<MudForm Class="border-2 border-solid mud-border-primary pa-4" @ref="form" onsubmit="@AddAdresse" Model="adresse">
    <MudTextField @bind-Value="adresse.Straße" Label="Straße" Required="true" />
    <MudTextField @bind-Value="adresse.Hausnummer" Label="Hausnummer" Required="true" />
    <MudTextField @bind-Value="adresse.Ort" Label="Ort" Required="true" />
    <MudTextField @bind-Value="adresse.PLZ" Label="PLZ" Required="true" />
    <MudTextField @bind-Value="adresse.Land" Label="LAnd" Required="true" />
    <br />
    <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary">Adresse hinzufügen</MudButton>
</MudForm>

@code {


    private MudForm form;
    private Adresse adresse = new Adresse();

    private async Task AddAdresse()
    {
        if (form.IsValid)
        {
            adresse.Id = Guid.NewGuid();

            using var context = DbFactory.CreateDbContext();
            context.Adressen.Add(adresse);
            await context.SaveChangesAsync();
            Navigation.NavigateTo($"/adressen/view");

        }
    }
}